<!DOCTYPE html>
<html>
<head>
    <title>Der Neue Algorithmus ist da</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>
    <header>
        <h1>Der Neue Algorithmus ist da</h1>
    </header>
    <nav>
        <a href="history.csv" download>Download CSV</a>
        <a href="history.json" download>Download JSON</a>
        <a href="history.png" download>Download PNG</a>
    </nav>
    <main>
        <p>Version: 1.0.0</p>
        <p>Diese Seite befindet sich noch in der experimentellen Phase.</p>
        <div id="chartContainer">
            <canvas id="myChart"></canvas>
        </div>
        <!-- New div for displaying the text -->
        <div id="infoText"></div>
    </main>
    <footer>
        <p>&copy; 2024</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            Papa.parse('history.csv', {
                download: true,
                header: true,
                dynamicTyping: true,
                complete: function(results) {
                    var labels = [];
                    var data = [];
                    if (results.meta.fields.includes('new_Money')) {
                        results.data.forEach(function(row, index) {
                            labels.push(index);
                            data.push(row['new_Money']);
                        });
                    }
                    var ctx = document.getElementById('myChart');
                    if (ctx) {
                        new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: labels,
                                datasets: [{
                                    label: 'new_Money',
                                    data: data,
                                    fill: false,
                                    borderColor: 'rgb(75, 192, 192)',
                                    tension: 0.1
                                }]
                            }
                        });
                    }
                },
                error: function(err) {
                    console.error('Error:', err);
                }
            });

            // Fetch and display the content of './info.txt'
            fetch('./info.txt')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('infoText').textContent = data;
                })
                .catch(error => console.error('Error:', error));
        });
    </script>
</body>
</html>
